<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Comparison of Inter-Blockchain Communication Technologies</title>
    
    <meta name="description" content="">
    
    <meta itemprop="name" content="Comparison of Inter-Blockchain Communication Technologies">
    
    
    <meta name="og:title" content="Comparison of Inter-Blockchain Communication Technologies">
    
        <meta name="image" content="http://troubles.md/floppies.png">
        <meta name="og:image" content="http://troubles.md/floppies.png">
       <meta name="og:url" content="http://troubles.md/posts/comparison-of-inter-blockchain-communication-technologies/">
    <meta name="og:site_name" content="Comparison of Inter-Blockchain Communication Technologies">
    <meta name="og:type" content="article">
    
    <meta name="article:tag" content="">
    <link rel="stylesheet" type="text/css" href="http://troubles.md/css/style.css">
    <link rel="stylesheet" type="text/css" href="http://troubles.md/css/syntax.css">
    <script async>
        window.onload = function() {
            var possibilities = [
                 "A high-level view of low-level code",  "Writing words and reading DWORDS", 
            ];

            document.getElementById('subtitle').innerHTML = possibilities[Math.floor(possibilities.length * Math.random())];
        };
    </script>
</head>

<body>

<header>
    
    <span>
        <a href="http://troubles.md/" class="title"><strong>troubles.md</strong></a>
        <span class="dash"> - </span><p id="subtitle" class="subtitle">A high-level view of low-level code</p>
        
        
    </span>
    
    <a class="rss" href="http://troubles.md/index.xml">
        <strong>
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="feather feather-rss"
            >
                <path d="M4 11a9 9 0 0 1 9 9">
                </path>
                <path d="M4 4a16 16 0 0 1 16 16">
                </path>
                <circle cx="5" cy="19" r="1">
                </circle>
            </svg>
        </strong>
    </a>
</header>


<div class="content">
  <h1>Comparison of Inter-Blockchain Communication Technologies <aside></aside></h1>
  

<p>A question we often get asked about Polkadot is how it compares to other blockchain technologies that nominally share the same goal. Blockchain interoperability is rightfully a hot topic right now, with many projects large and small in development. Many people in the blockchain space have come to the realisation that the siloing off of different chains leads to sluggish innovation - since the security of a chain is directly proportional to the number of users it has, it&rsquo;s hard for new chains to get off the ground even if they have many interesting and useful features. For cryptocurrencies, the less a coin is used the harder it can be to find someone selling or using those coins, which perpetuates the small userbase. Interoperability can solve these problems by having some measure of shared security and allowing users to easily convert coins between chains in a secure way (without trusting a third party). Some of the larger projects in the space that are attempting to solve this problem:</p>

<ul>
<li>ICON,</li>
<li>Cosmos,</li>
<li>Aion,</li>
<li>Wanchain,</li>
<li>and Polkadot, the solution we&rsquo;re working on at Parity.</li>
</ul>

<p>They are not quite solutions to the same set of problems - inter-blockchain communication (IBC) is a wide field and it&rsquo;s not necessarily possible for any one product to solve all the problems within it. However, they do share some goals. All of them attempt to allow you to share tokens between existing chains in some way or another, which is understandable since that is the most immediate user-facing benefit of IBC. Many users are dissatisfied with existing exchanges and they&rsquo;re one of only a few remaining components of the blockchain ecosystem with no good and well-adopted decentralised solution as of yet. Not all users can use centralised exchanges, too, because of legal issues. Some of these chains attempt to solve problems that are seperate from IBC, but I&rsquo;ll skim over those because it&rsquo;s not relevant to this discussion. Also, because the research for this article has already taken me forever and I don&rsquo;t want to also go and learn how ICON and Cosmos&rsquo;s Namecoin reimplementations work.</p>

<p>A quick summary:</p>

<ul>
<li>ICON is a blockchain and communications mechanism following a hub-and-spoke model. It seems to be mainly modelled after existing fiat financial exchanges and has a governance mechanism much more reminiscent of existing real-world representative democracy. Most of their documentation and whitepaper is dedicated to the way that the market operates and very little information is available on the actual method of interoperation.</li>
<li>Cosmos is a IBC protocol combined with a blockchain that implements that protocol known as Cosmos Hub. Cosmos Hub is a smart contract platform akin to Ethereum and attempts to allow tokens to be transferred between chains. Cosmos Hub requires chains that it connects to to be built using Tendermint, although it can connect to external chains using a &ldquo;bridge chain&rdquo;, which would be a blockchain built with Tendermint whose nodes also connect to the target chain, syncing and replicating the updated state.</li>
<li>Aion is a blockchain for implementing and incentivising one-way bridges between two chains - for example, Bitcoin-&gt;Ethereum or Monero-&gt;ZCash. It allows the bridges to set their own fees, intending to support a market for bridges. Although the intention is that larger chains will have direct bridges between one another, smaller chains can connect by the transaction taking multiple hops (this is handled by the Aion protocol). Two-way bridges are handled by having two individual bridges, one in each direction. This is the only solution that allows fully asynchronous communication, although the implementation of the concept is somewhat questionable - I&rsquo;ll get into that later.</li>
<li>Wanchain is also heavily modelled after fiat exchanges and seems to be more focussed on providing banking services such as loans than on providing automated interoperation. It does provide a decentralised exchange solution, though, so it can be included.</li>
<li>Polkadot is a blockchain of blockchains, a single relay chain similar to the Cosmos Hub that allows blockchains to communicate with one another. Polkadot enforces that &ldquo;parachains&rdquo; - the blockchains running on Polkadot - are built with Parity Substrate, although it can connect to external chains using a bridge. Polkadot is built for arbitrary cross-chain communication and does not require that messages be exchange of tokens. Substrate and Polkadot are built to allow more efficient and easier-to-create cryptocurrencies and allow non-cryptocurrency applications to benefit from the advantages of blockchains without having to hit the same efficiency and usability problems that prevents more applications being built with blockchain technology today.</li>
</ul>

<p>There are 3 broad categories here</p>

<ul>
<li>Hub-and-spoke generic communication products aimed at developers: Cosmos and Polkadot</li>
<li>Decentralised financial products aiming to displace fiat exchanges and banks: ICON and Wanchain</li>
<li>TCP/IP-for-blockchains generic bridging protocol: Aion</li>
</ul>

<p>I&rsquo;ll cover these technologies based on different use-cases, I will try to give each product a fair shot but keep in mind that I work for Parity Technologies, the developer of Polkadot, and as such my knowledge of Polkadot is much deeper than my knowledge of these other technologies. I try to be a fair propagandist but I can&rsquo;t cover what I don&rsquo;t know. Please send all complaints and corrections to <a href="https://twitter.com/meatwithdreams">@meatwithdreams</a> on Twitter.</p>

<h2 id="usecase-1-generic-message-bus">Usecase 1: Generic Message Bus</h2>

<p>One possible usecase of IBC is just generic communication between decentralised technologies - the kind of message bus that something like RabbitMQ might be used for in the centralised world. This means that any blockchain technology - not just cryptocurrencies - can communicate with each other seamlessly. This might be useful for something like a decentralised market that wants to use other currencies for payment instead of rolling its own. Obviously this also allows one to share tokens between cryptocurrencies.</p>

<p>Cosmos and Polkadot have general communication in mind and don&rsquo;t necessarily mandate that the messages that are exchanged be transfers of value, although I think that Polkadot more directly addresses this concern for reasons that I&rsquo;ll get into soon. Wanchain and ICON only intend to be financial exchanges and don&rsquo;t attempt to tackle non-currency decentralised information exchange at all, which is not necessarily a bad thing. Aion does allow arbitrary information exchange but seems to not care too much about how much transactions cost - its hybrid PoW/PoS system can only inflate transaction fees by increasing the real-world resources required to create a block, not to mention that bridges have no shared security<sup class="footnote-ref" id="fnref:shared-security"><a href="#fn:shared-security">1</a></sup> and so to get secure and decentralised inter-chain transactions you would realistically either have to roll your own bridge (in which case, why bother with a decentralised bridge) or go via some more popular chain which can inflate costs since the more popular chain will by definition be under a greater load. So you can send non-value-bearing messages on Aion but I don&rsquo;t see how it could be as efficient as Cosmos or Polkadot.</p>

<p>The reason I think that Polkadot tackles this better is simply because nowhere in the system does Polkadot address tokens at all. The only token that must exist anywhere on the system is Polkadot&rsquo;s native DOT token, whereas Cosmos Hub appears to be aimed at tokens first with arbitrary messages being a second-class citizen. Furthermore, the Substrate blockchain platform (which Polkadot parachains must be built with) has an extremely minimal set of required headers and can allow a developer to create a very efficient blockchain without having to worry about any header fields or functionality that they do not use. The Tendermint blockchain platform (which Cosmos zones must be built with) has a number of extra headers and functionality that a non-value-bearing cryptocurrency may not need, adding unnecessary overhead. In general it seems that although both Cosmos and Polkadot support both value-bearing and non-value-bearing blockchains, in Cosmos only value-bearing blockchains are first-class whereas Polkadot supports both equally.</p>

<p>I put this usecase first because it&rsquo;s probably the least immediately-pressing need out of all the needs addressed here. Most blockchains nowadays are cryptocurrencies, but one would hope that with ergonomic and efficient blockchain toolkits like Parity Substrate and Tendermint we will see more use of blockchains for non-currency usecases. Obviously this is a biased opinion - I know Polkadot a lot better than Cosmos and writing this article has been funded by the developers of Polkadot - but I believe that Polkadot more directly addresses non-value-bearing communication.</p>

<h2 id="usecase-2-cryptocurrency-marketplace">Usecase 2: Cryptocurrency Marketplace</h2>

<p>Probably everyone&rsquo;s immediate thought when it comes to IBC is a decentralised alternative to Shapeshift. An exchange that is totally decentralised could be resistant to deliberate manipulation and could provide lower fees since (in theory) you don&rsquo;t have the owner of the platform attempting to extract value.</p>

<p>Polkadot has a pretty weak showing here. It has a shared security model and aims to have low fees for transferring data between chains so it could make for a very good foundation for a DEX, but as far as I know there are none in development or even in the planning stage. Parity Substrate, an ergonomic blockchain development platform, could make the creation of a DEX on top of Polkadot simple and efficient but that doesn&rsquo;t change the fact that as of now there is no DEX-on-Polkadot project in development.</p>

<p>Aion, too, comes out poorly here. It&rsquo;s a pure communication platform and does not attempt to supply a DEX on top. Its bridges do not have shared security, which means that it is possible for bridges to smaller chains to monopolise transfer to the DEX and increase fees, not to mention that they could censor transactions too. You could build a DEX on the Aion chain itself using a smart contract, but Aion&rsquo;s smart contract platform implementation is extremely suspect<sup class="footnote-ref" id="fnref:see-the-linked-footnote-for-part-of-my-analysis-of-Aion-s-FastVM"><a href="#fn:see-the-linked-footnote-for-part-of-my-analysis-of-Aion-s-FastVM">0</a></sup>. I might write up a whole new article on problems that I have with Aion&rsquo;s implementation but for the sake of this article I&rsquo;ll ignore the implementation and only cover the fundamental ideas behind Aion itself in order to give it the best shot possible.</p>

<p>Cosmos does intend to supply a DEX but it doesn&rsquo;t have an implementation yet. Having said that, their <a href="https://github.com/cosmos/cosmos/blob/4609454a6b6e155579d055718d8bc6aa15e61714/DEX.md">analysis of the issues that one might run into while creating a DEX on Cosmos</a> is thorough and I am convinced that they have a competent team that could execute the creation of such an exchange. The vague design described in that document is both simple and elegant.</p>

<p>Wanchain and ICON are both exchanges first, which very little effort given to arbitrary communication. ICON is a large, complex beast that appears to care first about maturity, reliability and fostering a community of trust rather than attempting to build an exchange that is totally trustless. Having said that, it has some very questionable decisions. The driving force behind everything in ICON is a number known as the &ldquo;I-score&rdquo;. This is a (semi-)relative scoring mechanism that takes many variables into account and outputs a number that represents a node&rsquo;s trustworthiness. The I-score controls everything on the network - block rewards are given not based on stake or on creation of a block, but based on your I-score ranking. You can only become a member of ICON&rsquo;s governance by maintaining a high I-score. A problem here is that ICON&rsquo;s whitepaper makes absolutely no attempt to explain how this is measured. They mention that it is measured with &ldquo;deep learning&rdquo;, but how is the training done? It appears that (at least to start with) the I-score will use an offline-trained neural network, but this is highly problematic as the question is begging to be asked: who&rsquo;s doing the training? The answer of course is ICON. They control the network&rsquo;s initial values and there&rsquo;s nothing in the whitepaper to suggest that they don&rsquo;t control the continuing training of the network as it evolves; certainly their whitepaper has no attempt to describe how on-chain neural network training would work and so one must assume that it&rsquo;s theirs to train. If you&rsquo;re not familiar with machine learning, it&rsquo;s not magic and it certainly isn&rsquo;t unbiased. Even if you pretend that they couldn&rsquo;t just manually tweak the neuron weights to create an outcome favourable to them, the input and the training parameters are fundamental in how you train a neural network. It would be trivial for them to train the network in such a way as to optimise for a scoring mechanism that benefits them.</p>

<p>I should say that I&rsquo;m not accusing the ICON Foundation of doing such a thing, but this is anathema to the whole point of decentralised systems. If you have to trust ICON to correctly train their neural network then why not just trust a centralised exchange - many of which have a longer and more reliable history of trustworthiness than ICON does. A centralised exchange allows for faster transactions and there is a more established and competetive market established around them, so if you&rsquo;re not helping federate trust then why bother using it in the first place. If ICON does have a good answer for how they intend to do trustworthy and decentralised training then this point is rendered moot, of course, but any such answer should be scrutinised intently.</p>

<p>Wanchain, despite having the dorkiest name in blockchain, has the lofty aspiration to displace banks entirely. It also seems to be the only one of the technologies covered in this article that has a customer-facing application that you can use today, all the others still being in development or only in use by partners. The Wanchain Foundation hopes to displace existing financial products by supplying a fully-featured smart contract platform based on Solidity and the EVM, assumably this choice was made to allow Wanchain to leverage the existing Solidity community and Ethereum&rsquo;s ecosystem of financial products like Bancor and TheDAO. The whitepaper states that their hope is to allow Wanchain to be used for loans, currency exchange, deposit negotiation and many other roles that are traditionally filled by traditional banks. I have some issues with the choice of reusing the EVM and Solidity (which I&rsquo;ll get into in my review of these networks&rsquo; smart contract platforms) but I can definitely understand why it was made. As far as I can see, Wanchain&rsquo;s USP is to be &ldquo;Ethereum Done Right&rdquo;, implementing proof-of-stake consensus and inter-chain communication on top of a blockchain that fundamentally has the same state machine and runtime as Ethereum does. Even its cross-chain communication works almost precisely the same as our own <a href="https://github.com/paritytech/parity-bridge">Parity Bridge</a>, although I have no way to know if their implementation was inspired by ours or if it was independently invented. Wanchain is a great example of stealing good ideas from existing projects without trying to reinvent the wheel and I&rsquo;d say it probably has a good chance of getting good traction as long as its implementation is high-quality, although it&rsquo;s quite a narrowly-targeted technology that doesn&rsquo;t really attempt to do anything new.</p>

<h2 id="usecase-3-a-normal-cryptocurrency">Usecase 3: A &ldquo;Normal&rdquo; Cryptocurrency</h2>

<p>All of the chains mentioned here get efficiency, finality and transaction-time improvements over most existing popular blockchains by avoiding proof-of-work (PoW) security in favour of proof-of-stake (PoS)<sup class="footnote-ref" id="fnref:what-do-these-words-mean"><a href="#fn:what-do-these-words-mean">2</a></sup>. I don&rsquo;t have enough time or space to get into precisely why that is - there are plenty of articles explaining the difference out there - but just take my word for it for now. The ugly duckling here, again, is Aion. Aion does use PoS but it states that only &ldquo;60%&rdquo; of the blockchain will be secured using it, not going into further detail as to what that means. The other 40% is secured with a novel PoW algorithm that they call &ldquo;Proof of Intelligence&rdquo;, essentially using neural network training instead of hashing. This seems to be for no good reason relative to the security of the network, as far as their whitepaper states it&rsquo;s just to incentivise creation of specialised neural network training hardware. If that&rsquo;s the case, one wonders why they don&rsquo;t just implement this PoW as a seperate blockchain or to just use their own personal Aion token wealth to pay for third parties to develop this hardware. Polluting the blockchain implementation with it just seems to serve to lower the efficiency of the network for everyone for the sake of incentivising creation of hardware that most of them will never use.</p>

<p>Cosmos Hub&rsquo;s token (the Atom) and Polkadot&rsquo;s token (the DOT) are intended really for staking only and don&rsquo;t have much intention of being used for real transactions, although since they are and must be value-bearing there&rsquo;s no reason why they couldn&rsquo;t be. Wanchain and ICON both seem to have the intention of being used for payments and other financial products like loans - Wanchain especially targets this exact usecase - but apart from Aion, no one network comes out on top in this regard.</p>

<h2 id="usecase-4-an-applications-platform">Usecase 4: An Applications Platform</h2>

<p>This is going to be the most biased-sounding section, since I really do think that Polkadot comes out significantly ahead of the others in this regard. I&rsquo;ll try to explain my thinking, though, and hopefully I convince you that this isn&rsquo;t just propaganda (it is propaganda, but importantly it&rsquo;s not <em>just</em> propaganda).</p>

<p>Wanchain is just Ethereum Plus. If you understand Ethereum&rsquo;s pros and cons then the same is basically true for Wanchain. I definitely understand their choice here - no need to reinvent the wheel if you&rsquo;ve already got a community of developers and a virtual machine implementation tailor-made for blockchain - but the EVM has many problems. It&rsquo;s inefficient, and although that may seem like a small problem since no-one&rsquo;s building real-time applications with it that does lead to real problems. Lots of custom instructions and magic runtime-implemented functions have to be added to the EVM interpreter to get around the fact that these functions cannot be implemented in Solidity (or even in inline assembly) without massively increasing the gas price of the executed function. The inefficiency also means that any language built for the EVM must be very low-level and closely reflect the semantics of the EVM itself, since if an abstraction has a cost then that directly causes your users to pay a noticeable amount more to use your product. This also leads many developers to resort to inline assembly, completely disabling the already-flimsy safety rails provided by Solidity. That&rsquo;s not to mention that the only decently-supported language that compiles to EVM is Solidity, which I don&rsquo;t have time to get into all the complaints about but suffice to say that it is difficult to write safe, ergonomic or efficient code using it.</p>

<p>Cosmos Hub avoids being an applications platform entirely. As far as I can tell it only supports token transfer and communication and does not even attempt to provide a scripting language. Their philosophy is that smart contracts should be supplied by connecting to an external chain that supplies the smart contract logic, a philosophy that I agree with. Unlike Polkadot, Cosmos does not run chain verification logic on the Hub chain itself and therefore it does not already have an included runtime that can be co-opted for applications.</p>

<p>ICON glosses over dApps entirely in its whitepaper. It states that dApp code will not be included on the blockchain itself but will be downloaded from a seperate storefront with only the application storage stored on the ICON blockchain. No information is given as to whether the applications will run on a custom VM or whether the software will be a normal application (the latter option essentially removing the point of having dApps entirely since there&rsquo;s no way to verify that everyone is running the same code). It&rsquo;s also unclear precisely how the dApp store will work since it&rsquo;s given barely a paragraph in the whitepaper.</p>

<p>I don&rsquo;t want to keep kicking Aion in the teeth but the truth is that its application platform implementation is extremely questionable. They state that the VM is &ldquo;based on the JVM&rdquo; but the only way in which it&rsquo;s based on the JVM appears to be that their in-development scripting language is a strict subset of Java. I actually don&rsquo;t hate this decision - it allows them to piggyback off tooling development for the best-supported programming language in the world - but their VM appears to just be a fork of an EVM implementation with the word sized reduced from 256 to 128. The decision to change the word size is absolutely baffling. They state that it&rsquo;s for the sake of performance, but why on earth would you reuse an existing virtual machine if you intend to change its semantics in a way that breaks most code and most assumptions in existing tooling? Why a custom Java-based language that appears to only be available for Aion, rather than Solidity? Java does not at all expose the EVM&rsquo;s semantics, and this is vital for a EVM-based application layer, as I covered in my review of Wanchain&rsquo;s application platform. Their precise implementation of this virtual machine is also questionable<sup class="footnote-ref" id="fnref:aion-fastvm"><a href="#fn:aion-fastvm">3</a></sup>.</p>

<p>Ok, get ready for me to shill out for my corporate overlords: Polkadot&rsquo;s application platform is world-class and cutting-edge. It uses WebAssembly (Wasm) for its VM instruction set, which means that although the contracts are Turing-complete (which means that it&rsquo;s impossible to price execution upfront, a problem shared by every platform in this article) you get an instruction set with world-class support from compilers like LLVM and GCC. Although we can&rsquo;t reuse the excellent Wasm JIT compilers created by the V8 and SpiderMonkey teams<sup class="footnote-ref" id="fnref:cant-reuse-v8"><a href="#fn:cant-reuse-v8">4</a></sup> we still get many performance wins over using the EVM even without a JIT at all since Wasm is very efficiently executable. Since Wasm closely reflects the execution model of real machines, much more languages can and do efficiently compile to use it. Rust, C, C++, C#, TypeScript, Java, Haskell, Idris, Purescript and more all can compile to Wasm and so can be used to write programs on the Polkadot VM. On top of this, Polkadot&rsquo;s interface is very simple and so creating ergonomic and idiomatic libraries in each language to interface with Polkadot should be relatively easy. Polkadot doesn&rsquo;t just allow you to create applications, but whole blockchains with relative simplicity. Although Wanchain is the closest to Ethereum in terms of implementation, I&rsquo;d say that Polkadot really continues the legacy of Ethereum and takes it to its next logical step.</p>

<p>For the sake of balance, I&rsquo;ll cover some downsides of Polkadot&rsquo;s model. Although creating blockchains with Substrate and Polkadot is intended to be easy, the simple model that makes this the case means that sharding Polkadot parachains is much more difficult than the more-involved Cosmos zones (which can shard heirarchically with ease). Polkadot itself runs each parachain as a shard but parachains that want to shard would have to deploy many duplicated parachains that communicate amongst themselves using Polkadot&rsquo;s IBC, which would be slower than sharding zones since it&rsquo;s a global message bus rather than a message bus local to that particular set of shards. This isn&rsquo;t a fundamental limitation, but there isn&rsquo;t a good solution to it in development as of yet. I believe that this is much less of a problem than it is in Ethereum since the transaction throughput is many orders-of-magnitude higher and so sharding is less necessary.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Hopefully that was as fair as I could make it, I personally think that Polkadot and Cosmos come out on top overall but they both target developers first rather than investors (ICON) or end-users (Wanchain) and I&rsquo;m a developer and so I can more easily see the benefits. Polkadot and Cosmos both have upsides and downsides and although I&rsquo;d say that Polkadot is overall the more practical technology I can&rsquo;t pretend that Cosmos doesn&rsquo;t have some great tech behind it, and I wish the team and technology all the best. I&rsquo;m excited for all of these technologies to come to maturity and start to see some real-world use and I hope this article has given you some insight into what project might be more useful for what usecase as they do.</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:shared-security">Shared security means that the security of a given bridge is not a function of the number of nodes participating in that bridge, but a function of the number of nodes on the network total. Polkadot has this since parachains (the &ldquo;spokes&rdquo;) must supply a valid state root to the relay chain (the &ldquo;hub&rdquo;), and it appears that Cosmos with Cosmos Hub has a similar system. It&rsquo;s not at all clear how ICON (TODO: Wanchain?) works in this respect.
 <a class="footnote-return" href="#fnref:shared-security"><sup>[return]</sup></a></li>
<li id="fn:what-do-these-words-mean">Efficiency meaning that less energy and CPU time is wasted relative to a centralised system; finality meaning that you can be 100% certain that a block cannot be reverted after a certain point; transaction time meaning that a transaction can go from being initiated to confirmed much faster.
 <a class="footnote-return" href="#fnref:what-do-these-words-mean"><sup>[return]</sup></a></li>
<li id="fn:aion-fastvm">One problem with the Ethereum Virtual Machine (EVM) is that it is slow. Really slow. It&rsquo;s an interpreted language, and not one built for fast execution at that. One common technique for increasing the speed of interpreted languages is to use a &ldquo;just-in-time&rdquo; (JIT) compiler, which compiles the language to machine code as you execute it. This can give speedups as much as 100x depending on the workload. There does exist a JIT for the EVM, but it&rsquo;s not used because JITs are <em>extremely</em> dangerous. Any non-determinism in the compiler - even in the most obscure edge-cases - can be exploited by an adversary to force a hard-fork; not to mention that even if you produce seemingly-identical machine code even <a href="http://troubles.md/posts/i-triple-equals/">switching from 32-bit to 64-bit can cause different behaviour</a>. Aion&rsquo;s FastVM is a fork of the EVM JIT and as a result uses LLVM for compilation. This is, shockingly, even more dangerous than rolling your own compiler. LLVM has many sources of nondeterminism, it even has the concepts of &ldquo;undef&rdquo; and &ldquo;poison&rdquo; which are specifically made to allow the optimiser to introduce nondeterminism into the compilation process in order to improve performance. On top of the deliberate nondeterminism there are also outright bugs in LLVM&rsquo;s implementation, some of which go unfixed for years because LLVM is not made to be used for creating code that runs deterministically and equivalently on different machines. Another problem with LLVM&rsquo;s optimisations is that almost all useful optimisations are non-linear by definition - i.e. there exists some input where optimising that input repeated 10 times takes 100 times the amount of computation power as optimising that input repeated only once. These are called &ldquo;compiler bombs&rdquo; and they are a problem since now you have to measure gas price for the compilation process as well as on the runtime itself (Polkadot intends to circumvent this with its WebAssembly runtime by creating a non-optimising linear-time compiler since if the compiler is linear-time or better you can price compilation by input byte and not by runtime). If you want to hear more about my complaints with Aion&rsquo;s smart contract platform, and why LLVM and JIT compilation is a bad idea, contact me on <a href="https://twitter.com/meatwithdreams">my Twitter account</a>.
 <a class="footnote-return" href="#fnref:aion-fastvm"><sup>[return]</sup></a></li>
<li id="fn:cant-reuse-v8">We can&rsquo;t reuse V8 or SpiderMonkey since they&rsquo;re not built for determinism - there&rsquo;s no way for us to verify that they produce the same behaviour on every architecture.
 <a class="footnote-return" href="#fnref:cant-reuse-v8"><sup>[return]</sup></a></li>
</ol>
</div>

</div>

<footer>
	<p>© 2017-2018, all rights reserved.</a>
</footer>
</body>
</html>
